**1. 核心功能分析：**

基础功能：
- 扔漂流瓶（发送消息）
- 捡漂流瓶（随机接收消息）
- 回复漂流瓶（简单对话）
- 个人中心（查看历史记录）

进阶功能：
- 漂流瓶类型（文字、图片、语音）
- 瓶子保质期（比如7天自动销毁）
- 举报机制（防止不良内容）
- 瓶子标签（心情、话题等）


个人中心
- 用户头像,昵称,描述

- 发布的漂流瓶数量
             

让我描述一下登录和认证的完整流程：

1. **应用启动流程**：
   - 应用启动时，首先会进入初始路由（通常是 `/login`）
   - `AuthMiddleware` 会拦截这个路由请求
   - 中间件检查本地存储中是否有 token：
     - 如果有 token → 自动跳转到主页（`AppRoutes.home`）
     - 如果没有 token → 保持在登录页（`AppRoutes.login`）

2. **登录流程**：
   ```mermaid
   graph TD
   A[输入QQ邮箱] --> B[发送验证码]
   B --> C[60s倒计时]
   B --> D[输入验证码]
   D --> E[点击登录]
   E --> F{验证成功?}
   F -->|是| G[保存token]
   G --> H[保存用户ID]
   H --> I[跳转主页]
   F -->|否| J[显示错误]
   ```

3. **Token 管理**：
   - 登录成功后，通过 `TokenService` 保存：
     - token
     - userId
   - 这些信息会被用于：
     - 验证用户登录状态
     - API 请求认证
     - 自动登录

4. **路由保护**：
   - 所有需要登录的页面都可以添加 `AuthMiddleware`
   - 如果访问这些页面时没有 token，会自动跳转到登录页

这样的设计确保了：
- 用户只需登录一次
- 本地有 token 时自动登录
- token 失效时要求重新登录
- 受保护路由的访问控制
